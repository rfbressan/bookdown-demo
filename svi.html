<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Capítulo 7 Calibrando uma SVI | Introdução a Superfície de Volatilidade</title>
  <meta name="description" content="Gitbook sobre superfícies de volatilidade para o Clube de Finanças ESAG.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Capítulo 7 Calibrando uma SVI | Introdução a Superfície de Volatilidade" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Gitbook sobre superfícies de volatilidade para o Clube de Finanças ESAG." />
  <meta name="github-repo" content="rfbressan/vol_surface_gitbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 7 Calibrando uma SVI | Introdução a Superfície de Volatilidade" />
  
  <meta name="twitter:description" content="Gitbook sobre superfícies de volatilidade para o Clube de Finanças ESAG." />
  

<meta name="author" content="Rafael Felipe Bressan">


<meta name="date" content="2019-02-09">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="calibracao.html">
<link rel="next" href="ssvi.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução a Superfície de Volatilidade</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefácio</a></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html"><i class="fa fa-check"></i>Sobre os Autores</a><ul>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#rafael-felipe-bressan"><i class="fa fa-check"></i>Rafael Felipe Bressan</a></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#erik-naoki-kawano"><i class="fa fa-check"></i>Erik Naoki Kawano</a></li>
<li class="chapter" data-level="" data-path="sobre-os-autores.html"><a href="sobre-os-autores.html#glauber-naue"><i class="fa fa-check"></i>Glauber Naue</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="opcoes.html"><a href="opcoes.html"><i class="fa fa-check"></i><b>1</b> Introdução as opções</a><ul>
<li class="chapter" data-level="1.1" data-path="opcoes.html"><a href="opcoes.html#conceitos-in-the-money-at-the-money-e-out-the-money"><i class="fa fa-check"></i><b>1.1</b> Conceitos in the money, at the money e out the money</a></li>
<li class="chapter" data-level="1.2" data-path="opcoes.html"><a href="opcoes.html#modelos-americano-e-europeu-de-opcoes"><i class="fa fa-check"></i><b>1.2</b> Modelos americano e europeu de opções</a></li>
<li class="chapter" data-level="1.3" data-path="opcoes.html"><a href="opcoes.html#hedge"><i class="fa fa-check"></i><b>1.3</b> Hedge</a></li>
<li class="chapter" data-level="1.4" data-path="opcoes.html"><a href="opcoes.html#travas"><i class="fa fa-check"></i><b>1.4</b> Travas</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="processos-estocasticos.html"><a href="processos-estocasticos.html"><i class="fa fa-check"></i><b>2</b> Processos Estocásticos em Finanças</a><ul>
<li class="chapter" data-level="2.1" data-path="processos-estocasticos.html"><a href="processos-estocasticos.html#markov"><i class="fa fa-check"></i><b>2.1</b> Processos de Markov</a></li>
<li class="chapter" data-level="2.2" data-path="processos-estocasticos.html"><a href="processos-estocasticos.html#mb"><i class="fa fa-check"></i><b>2.2</b> Movimento Browniano</a></li>
<li class="chapter" data-level="2.3" data-path="processos-estocasticos.html"><a href="processos-estocasticos.html#definicao"><i class="fa fa-check"></i><b>2.3</b> Definição</a></li>
<li class="chapter" data-level="2.4" data-path="processos-estocasticos.html"><a href="processos-estocasticos.html#mbg"><i class="fa fa-check"></i><b>2.4</b> Movimento Browniano Geométrico</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="bsm.html"><a href="bsm.html"><i class="fa fa-check"></i><b>3</b> Modelo Black-Scholes-Merton</a><ul>
<li class="chapter" data-level="3.1" data-path="bsm.html"><a href="bsm.html#portfolio-de-replicacao"><i class="fa fa-check"></i><b>3.1</b> Portfólio de replicação</a></li>
<li class="chapter" data-level="3.2" data-path="bsm.html"><a href="bsm.html#precificacao-neutra-ao-risco"><i class="fa fa-check"></i><b>3.2</b> Precificação neutra ao risco</a></li>
<li class="chapter" data-level="3.3" data-path="bsm.html"><a href="bsm.html#encontrando-a-equacao-de-black-scholes"><i class="fa fa-check"></i><b>3.3</b> Encontrando a equação de Black-Scholes</a></li>
<li class="chapter" data-level="3.4" data-path="bsm.html"><a href="bsm.html#solucao-analitica"><i class="fa fa-check"></i><b>3.4</b> Solução analítica</a></li>
<li class="chapter" data-level="3.5" data-path="bsm.html"><a href="bsm.html#putcallparity"><i class="fa fa-check"></i><b>3.5</b> Paridade compra e venda</a></li>
<li class="chapter" data-level="3.6" data-path="bsm.html"><a href="bsm.html#gregas"><i class="fa fa-check"></i><b>3.6</b> As Gregas</a><ul>
<li class="chapter" data-level="3.6.1" data-path="bsm.html"><a href="bsm.html#delta"><i class="fa fa-check"></i><b>3.6.1</b> Delta</a></li>
<li class="chapter" data-level="3.6.2" data-path="bsm.html"><a href="bsm.html#gamma"><i class="fa fa-check"></i><b>3.6.2</b> Gamma</a></li>
<li class="chapter" data-level="3.6.3" data-path="bsm.html"><a href="bsm.html#theta"><i class="fa fa-check"></i><b>3.6.3</b> Theta</a></li>
<li class="chapter" data-level="3.6.4" data-path="bsm.html"><a href="bsm.html#vega"><i class="fa fa-check"></i><b>3.6.4</b> Vega</a></li>
<li class="chapter" data-level="3.6.5" data-path="bsm.html"><a href="bsm.html#rho"><i class="fa fa-check"></i><b>3.6.5</b> Rho</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="smile.html"><a href="smile.html"><i class="fa fa-check"></i><b>4</b> Smile de Volatilidade</a><ul>
<li class="chapter" data-level="4.1" data-path="smile.html"><a href="smile.html#reparametrizando"><i class="fa fa-check"></i><b>4.1</b> Reparametrizando B&amp;S e definição de moneyness</a></li>
<li class="chapter" data-level="4.2" data-path="smile.html"><a href="smile.html#caracsmile"><i class="fa fa-check"></i><b>4.2</b> Características de smiles de volatilidade</a><ul>
<li class="chapter" data-level="4.2.1" data-path="smile.html"><a href="smile.html#mercados-cambiais"><i class="fa fa-check"></i><b>4.2.1</b> Mercados cambiais</a></li>
<li class="chapter" data-level="4.2.2" data-path="smile.html"><a href="smile.html#mercados-de-equities"><i class="fa fa-check"></i><b>4.2.2</b> Mercados de <em>equities</em></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="smile.html"><a href="smile.html#smileprecificacao"><i class="fa fa-check"></i><b>4.3</b> Smile como forma de precificação</a></li>
<li class="chapter" data-level="4.4" data-path="smile.html"><a href="smile.html#estrutura-a-termo"><i class="fa fa-check"></i><b>4.4</b> Estrutura a termo</a></li>
<li class="chapter" data-level="4.5" data-path="smile.html"><a href="smile.html#arbestatica"><i class="fa fa-check"></i><b>4.5</b> Arbitragem estática</a><ul>
<li class="chapter" data-level="4.5.1" data-path="smile.html"><a href="smile.html#arbitragem-de-borboleta"><i class="fa fa-check"></i><b>4.5.1</b> Arbitragem de borboleta</a></li>
<li class="chapter" data-level="4.5.2" data-path="smile.html"><a href="smile.html#arbitragem-de-calendario"><i class="fa fa-check"></i><b>4.5.2</b> Arbitragem de calendário</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="smile.html"><a href="smile.html#limites-de-inclinacao"><i class="fa fa-check"></i><b>4.6</b> Limites de inclinação</a></li>
<li class="chapter" data-level="4.7" data-path="smile.html"><a href="smile.html#rnd"><i class="fa fa-check"></i><b>4.7</b> Distribuição implícita</a></li>
<li class="chapter" data-level="4.8" data-path="smile.html"><a href="smile.html#conclusao"><i class="fa fa-check"></i><b>4.8</b> Conclusão</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="superficies.html"><a href="superficies.html"><i class="fa fa-check"></i><b>5</b> Superfícies de volatilidade</a><ul>
<li class="chapter" data-level="5.1" data-path="superficies.html"><a href="superficies.html#modelos-estocasticos"><i class="fa fa-check"></i><b>5.1</b> Modelos estocásticos</a><ul>
<li class="chapter" data-level="5.1.1" data-path="superficies.html"><a href="superficies.html#heston"><i class="fa fa-check"></i><b>5.1.1</b> Heston</a></li>
<li class="chapter" data-level="5.1.2" data-path="superficies.html"><a href="superficies.html#sabr"><i class="fa fa-check"></i><b>5.1.2</b> SABR</a></li>
<li class="chapter" data-level="5.1.3" data-path="superficies.html"><a href="superficies.html#bates"><i class="fa fa-check"></i><b>5.1.3</b> Bates</a></li>
<li class="chapter" data-level="5.1.4" data-path="superficies.html"><a href="superficies.html#volatilidade-local"><i class="fa fa-check"></i><b>5.1.4</b> Volatilidade local</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="superficies.html"><a href="superficies.html#modelos-parametricos"><i class="fa fa-check"></i><b>5.2</b> Modelos paramétricos</a><ul>
<li class="chapter" data-level="5.2.1" data-path="superficies.html"><a href="superficies.html#sec:svi"><i class="fa fa-check"></i><b>5.2.1</b> SVI</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="superficies.html"><a href="superficies.html#modelos-nao-parametricos"><i class="fa fa-check"></i><b>5.3</b> Modelos não-paramétricos</a><ul>
<li class="chapter" data-level="5.3.1" data-path="superficies.html"><a href="superficies.html#interpolacao-e-suavizacao-spline"><i class="fa fa-check"></i><b>5.3.1</b> Interpolação e suavização spline</a></li>
<li class="chapter" data-level="5.3.2" data-path="superficies.html"><a href="superficies.html#algoritmos-livres-de-arbitragem"><i class="fa fa-check"></i><b>5.3.2</b> Algoritmos livres de arbitragem</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="superficies.html"><a href="superficies.html#extrapolacao-do-smile"><i class="fa fa-check"></i><b>5.4</b> Extrapolação do smile</a></li>
<li class="chapter" data-level="5.5" data-path="superficies.html"><a href="superficies.html#conclusao-1"><i class="fa fa-check"></i><b>5.5</b> Conclusão</a></li>
<li class="chapter" data-level="5.6" data-path="superficies.html"><a href="superficies.html#referencias"><i class="fa fa-check"></i><b>5.6</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="calibracao.html"><a href="calibracao.html"><i class="fa fa-check"></i><b>6</b> Métodos de Calibração</a><ul>
<li class="chapter" data-level="6.1" data-path="calibracao.html"><a href="calibracao.html#calibracao-versus-interpolacao"><i class="fa fa-check"></i><b>6.1</b> Calibração versus Interpolação</a></li>
<li class="chapter" data-level="6.2" data-path="calibracao.html"><a href="calibracao.html#spline-cubica"><i class="fa fa-check"></i><b>6.2</b> Spline cúbica</a></li>
<li class="chapter" data-level="6.3" data-path="calibracao.html"><a href="calibracao.html#suavizacao"><i class="fa fa-check"></i><b>6.3</b> Suavização</a></li>
<li class="chapter" data-level="6.4" data-path="calibracao.html"><a href="calibracao.html#parametrizacao"><i class="fa fa-check"></i><b>6.4</b> Parametrização</a><ul>
<li class="chapter" data-level="6.4.1" data-path="calibracao.html"><a href="calibracao.html#funcao-perda"><i class="fa fa-check"></i><b>6.4.1</b> Função perda</a></li>
<li class="chapter" data-level="6.4.2" data-path="calibracao.html"><a href="calibracao.html#otimizadores"><i class="fa fa-check"></i><b>6.4.2</b> Otimizadores</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="calibracao.html"><a href="calibracao.html#conclusao-2"><i class="fa fa-check"></i><b>6.5</b> Conclusão</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="svi.html"><a href="svi.html"><i class="fa fa-check"></i><b>7</b> Calibrando uma SVI</a><ul>
<li class="chapter" data-level="7.1" data-path="svi.html"><a href="svi.html#modelo-svi"><i class="fa fa-check"></i><b>7.1</b> Modelo SVI</a></li>
<li class="chapter" data-level="7.2" data-path="svi.html"><a href="svi.html#restricoes-de-nao-arbitragem"><i class="fa fa-check"></i><b>7.2</b> Restrições de não-arbitragem</a></li>
<li class="chapter" data-level="7.3" data-path="svi.html"><a href="svi.html#reparametrizacao-quasi-explicit"><i class="fa fa-check"></i><b>7.3</b> Reparametrização Quasi-explicit</a><ul>
<li class="chapter" data-level="7.3.1" data-path="svi.html"><a href="svi.html#pq"><i class="fa fa-check"></i><b>7.3.1</b> Solução explícita do problema reduzido</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="svi.html"><a href="svi.html#algoritmo"><i class="fa fa-check"></i><b>7.4</b> Algoritmo</a></li>
<li class="chapter" data-level="7.5" data-path="svi.html"><a href="svi.html#resultados"><i class="fa fa-check"></i><b>7.5</b> Resultados</a></li>
<li class="chapter" data-level="7.6" data-path="svi.html"><a href="svi.html#conclusao-3"><i class="fa fa-check"></i><b>7.6</b> Conclusão</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ssvi.html"><a href="ssvi.html"><i class="fa fa-check"></i><b>8</b> Superfície SVI</a><ul>
<li class="chapter" data-level="8.1" data-path="ssvi.html"><a href="ssvi.html#reparametrizacoes-equivalentes"><i class="fa fa-check"></i><b>8.1</b> Reparametrizações equivalentes</a></li>
<li class="chapter" data-level="8.2" data-path="ssvi.html"><a href="ssvi.html#superficie-svi"><i class="fa fa-check"></i><b>8.2</b> Superfície SVI</a><ul>
<li class="chapter" data-level="8.2.1" data-path="ssvi.html"><a href="ssvi.html#heston-1"><i class="fa fa-check"></i><b>8.2.1</b> Heston</a></li>
<li class="chapter" data-level="8.2.2" data-path="ssvi.html"><a href="ssvi.html#lei-de-potencia"><i class="fa fa-check"></i><b>8.2.2</b> Lei de potência</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="ssvi.html"><a href="ssvi.html#condicoes-de-nao-arbitragem"><i class="fa fa-check"></i><b>8.3</b> Condições de não-arbitragem</a></li>
<li class="chapter" data-level="8.4" data-path="ssvi.html"><a href="ssvi.html#densidade-neutra-ao-risco"><i class="fa fa-check"></i><b>8.4</b> Densidade neutra ao risco</a></li>
<li class="chapter" data-level="8.5" data-path="ssvi.html"><a href="ssvi.html#superficie-de-volatilidade-local"><i class="fa fa-check"></i><b>8.5</b> Superfície de volatilidade local</a></li>
<li class="chapter" data-level="8.6" data-path="ssvi.html"><a href="ssvi.html#calibracao-da-ssvi"><i class="fa fa-check"></i><b>8.6</b> Calibração da SSVI</a></li>
<li class="chapter" data-level="8.7" data-path="ssvi.html"><a href="ssvi.html#conclusao-4"><i class="fa fa-check"></i><b>8.7</b> Conclusão</a></li>
<li class="chapter" data-level="8.8" data-path="ssvi.html"><a href="ssvi.html#referencias-1"><i class="fa fa-check"></i><b>8.8</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliografia.html"><a href="bibliografia.html"><i class="fa fa-check"></i>Bibliografia</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org/" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução a Superfície de Volatilidade</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="svi" class="section level1">
<h1><span class="header-section-number">Capítulo 7</span> Calibrando uma SVI</h1>
<p>Neste capítulo iremos mostrar como fazer uma calibração de um smile SVI baseado nos trabalhos de <span class="citation">(Gatheral <a href="#ref-Gatheral2004">2004</a>)</span> e <span class="citation">(De Marco and Martini <a href="#ref-DeMarco2009">2009</a>)</span>. Escolheremos apenas uma fatia da superfície de volatilidade, fixando o tempo para expiração (maturidade) e coletando as volatilidades implícitas para diversos strikes.</p>
<p>Como já apresentado em posts anteriores, existem diversas formas de interpolar, extrapolar, parametrizar e calibrar smiles de volatilidade. Exsitem vantagens e desvantagens para cada método. Neste post iremos fixar nossa atenção no modelo paramétrico de smile chamado SVI - Stochastic Volatility Inspired - uma forma que une a “simplicidade” de um modelo paramétrico com o poder de adesão aos dados de mercado dos modelos de volatilidade estocástica (i.e. Heston, SABR e afins).</p>
<p>Chamar o modelo SVI de simples é puro eufemismo, ele é um modelo poderoso, com fundamento teórico avançado e diversos detalhes para sua calibração.</p>
<div id="modelo-svi" class="section level2">
<h2><span class="header-section-number">7.1</span> Modelo SVI</h2>
<p>Este modelo foi apresentado por <a href="https://mfe.baruch.cuny.edu/jgatheral/">Jim Gatheral</a> na conferência <em>Global Derivatives &amp; Risk Management 2004</em> e foi bem recebido pelos profissionais de mercado interessados em superfícies de volatilidade para <em>equities</em>, principalmente.</p>
<p>O modelo possui duas propriedades que são as razões para sua popularidade. Ele satisfaz a fórmula do momento de <span class="citation">Lee (<a href="#ref-Lee2004">2004</a>)</span>, que é um resultado independente de modelo que especifica os limites assintóticos para um <em>smile</em> de volatilidade implícita. Portanto, o modelo SVI é válido para extrapolação além da região central dos dados disponíveis. Além disso, afirma-se que o modelo SVI é relativamente fácil de calibrar para dados de mercado, de modo que a superfície de volatilidade implícita correspondente é livre de arbitragem de calendário. As condições que garantem a ausência de arbitragem de borboleta forma resolvidas em um segundo artigo por <span class="citation">Gatheral and Jacquier (<a href="#ref-Gatheral2014">2014</a>)</span>.</p>
<p>No SVI é possível se estabelecer condições explícitas em seus parâmetros, de modo que o modelo não gere preços onde oportunidades de <a href="smile.html#arbestatica">arbitragem estáticas</a> possam ocorrer. A calibração para dados reais de mercado requer algoritmos de otimização não-linear e pode ser bastante demorada. Mais recentemente, um método para calibração que usa a estrutura inerente do modelo para reduzir as dimensões do problema de otimização foi desenvolvido em <span class="citation">De Marco and Martini (<a href="#ref-DeMarco2009">2009</a>)</span>.</p>
<p>A parametrização conhecida como <em>RAW</em> do SVI é apresentada na equação <a href="superficies.html#eq:rawsvi">(5.11)</a>, seguindo a notação já introduzida <a href="smile.html#smile">anteriormente</a>, portanto, estamos modelando a <strong>variância total</strong> implícita para um determinado prazo. Para diferentes maturidades, teremos diferentes conjuntos de parâmetros.</p>
<span class="math display" id="eq:rawsvi">\[\begin{equation}
w(k) = a + b\left(\rho(k-m)+\sqrt{(k-m)^2 + \sigma^2}\right)
\tag{5.11}
\end{equation}\]</span>
<p>onde: <span class="math inline">\(a \in \mathbb R\)</span>, <span class="math inline">\(b \geq 0\)</span>, <span class="math inline">\(|\rho| &lt; 1\)</span>, <span class="math inline">\(m \in \mathbb R\)</span>, <span class="math inline">\(\sigma &gt; 0\)</span>, e <span class="math inline">\(a+b \sigma\sqrt{1 − \rho^2} \geq 0\)</span> para garantir que <span class="math inline">\(\min w(k)&gt;0, \, \forall k \in \mathbb R\)</span>.</p>
</div>
<div id="restricoes-de-nao-arbitragem" class="section level2">
<h2><span class="header-section-number">7.2</span> Restrições de não-arbitragem</h2>
<p>Antes de demonstrar a restrição imposta aos parâmetros <span class="math inline">\(b\)</span> e <span class="math inline">\(\rho\)</span> em função dos limites de inclinação das asas do <em>smile</em>, vamos derivar as expressões para <span class="math inline">\(w\prime(k)\)</span> e <span class="math inline">\(w\prime\prime(k)\)</span> que nos serão úteis na demonstração.</p>
<p>A expressão para <span class="math inline">\(w\prime(k)\)</span> é bastante simples:</p>
<span class="math display" id="eq:wk">\[\begin{equation}
w\prime(k) = b \left[\rho + \frac{(k-m)}{\sqrt{(k-m)^2+\sigma^2}}\right]
\tag{7.1}
\end{equation}\]</span>
<p>Derivando novamente a equação <a href="svi.html#eq:wk">(7.1)</a> em relação a <span class="math inline">\(k\)</span> teremos uma expressão ainda mais simples, mesmo que após alguma manipulação algébrica um tanto tediosa<a href="#fn14" class="footnoteRef" id="fnref14"><sup>14</sup></a>, e resulta em:</p>
<span class="math display" id="eq:wkk">\[\begin{equation}
w\prime\prime(k)=\frac{b\sigma^2}{[(k-m)^2+\sigma^2]^{3/2}}
\tag{7.2}
\end{equation}\]</span>
<p>onde, se considerarmos <span class="math inline">\(b&gt;0\)</span> temos que <span class="math inline">\(w\prime\prime(k)&gt;0, \,\forall k\in \mathbb R\)</span>, ou seja, o <em>smile</em> de volatilidade definido pela equação <a href="superficies.html#eq:rawsvi">(5.11)</a> é <strong>estritamente</strong> convexo.</p>
<p><span class="citation">Rogers and Tehranchi (<a href="#ref-Rogers2010">2010</a>)</span> definiram os limites possíveis para a inclinação das asas em função do tempo para expiração, provando que o <em>smile</em> tende a ficar mais horizontal a medida que o prazo aumenta. Este limite pode ser escrito da seguinte forma e é uma <strong>condição necessária</strong> para a ausência de arbitragem:</p>
<span class="math display" id="eq:rogers">\[\begin{equation}
|w\prime(k)|\leq \frac{4}{\tau} \qquad \forall k \in \mathbb R, \quad \forall \tau \in (0, \infty)
\tag{7.3}
\end{equation}\]</span>
<p>Sendo o <em>smile</em> convexo, suas máximas inclinações ocorrem quando <span class="math inline">\(k\rightarrow \pm \infty\)</span>. Portanto, deve-se avaliar a restrição dada pela equação <a href="svi.html#eq:rogers">(7.3)</a> nestes limites da seguinte maneira:</p>
<span class="math display">\[\begin{align}
\lim\limits_{k\rightarrow\infty}w\prime(k)&amp;=b(1+\rho)\geq 0\\
\lim\limits_{k\rightarrow-\infty}w\prime(k)&amp;=-b(1-\rho)\leq 0
\end{align}\]</span>
<p>que satisfazendo estas duas relações ao mesmo tempo em que se restringe os parâmetros <span class="math inline">\(b\)</span> e <span class="math inline">\(\rho\)</span> através da inequalidade de Rogers e Tehranchi nos garante o seguinte resultado para um SVI <strong>livre de arbitragem de travas</strong>.</p>
<span class="math display" id="eq:trava">\[\begin{equation}
b(1+|\rho|)\leq\frac{4}{\tau}
\tag{7.4}
\end{equation}\]</span>
<p>Para garantir que a superfície gerada está livre de arbitragem do tipo borboleta deve-se primeiramente definir uma função<a href="#fn15" class="footnoteRef" id="fnref15"><sup>15</sup></a> <span class="math inline">\(g: \mathbb R\rightarrow \mathbb R\)</span>, tal que:</p>
<span class="math display" id="eq:g">\[\begin{equation}
g(k)=\left(1-\frac{kw\prime(k)}{2w(k)}\right)^2-\frac{w\prime(k)^2}{4}\left(\frac{1}{w(k)}+\frac{1}{4}\right)+\frac{w\prime\prime(k)}{2}
\tag{7.5}
\end{equation}\]</span>
<p>e seguir o lema :</p>
<p><strong>Lema 1</strong> Uma fatia da superfície de volatilidade está livre de arbitragem do tipo borboleta se, e somente se, <span class="math inline">\(g(k) \geq 0\)</span> para todo <span class="math inline">\(k \in \mathbb R\)</span> e <span class="math inline">\(\lim\limits_{k\rightarrow+\infty}d_1(k)=-\infty\)</span>.</p>
<p>Infelizmente, a natureza altamente não-linear da função <span class="math inline">\(g(k)\)</span> impossibilita a derivação de restrições gerais aos parâmetros do SVI. A forma mais simples de eliminar arbitragem do tipo borbobleta é incluir a restrição <span class="math inline">\(g(k) \geq 0\)</span> na função perda e proceder com a calibração dos parâmetros.</p>
</div>
<div id="reparametrizacao-quasi-explicit" class="section level2">
<h2><span class="header-section-number">7.3</span> Reparametrização Quasi-explicit</h2>
<p>Um dos problemas mais marcantes com a calibração do SVI dado pela equação <a href="superficies.html#eq:rawsvi">(5.11)</a> é sua natureza altamente não-linear que gera inúmeros pontos de mínimo locais. Mesmo em um ambiente simulado, um típico otimizador de <a href="calibracao.html#calibracao">mínimos quadrados</a> como Levenberg-Marquardt não consegue chegar ao mínimo global, onde a função perda é igual a zero. A solução encontrada é dependente dos valores iniciais inputados ao otimizador e a robustez do conjunto de parâmetros encontrados não é garantida.</p>
<p>Uma forma de contornar este problema pode ser a utilização de otimizadores globais, como algortimos genéticos, em um primeiro estágio e então o refinamento desta solução através de um otimizador local (LM, por exemplo).</p>
<p>Outra forma, adotada em <span class="citation">De Marco and Martini (<a href="#ref-DeMarco2009">2009</a>)</span> é a reparametrização da equação <a href="superficies.html#eq:rawsvi">(5.11)</a> de forma que esta possa ser tratada como um prolema linear. Para tanto, considere a seguinte troca de variáveis:</p>
<span class="math display">\[\begin{equation}
y = \frac{k-m}{\sigma}
\end{equation}\]</span>
<p>então a parametrização <em>RAW</em> do SVI se torna.</p>
<span class="math display">\[\begin{equation}
w(y) = a + b\sigma\left(\rho y + \sqrt{y^2 + 1}\right)
\end{equation}\]</span>
<p>Definindo agora as seguintes variáveis reparametrizadas é possível reduzir a dimensão de parâmetros de um SVI de 5 para apenas 3:</p>
<span class="math display">\[\begin{align}
c = &amp;b\sigma\\
d = &amp;\rho b \sigma
\end{align}\]</span>
<span class="math display" id="eq:quasiexplicit">\[\begin{equation}
w(y)=a+dy+c\sqrt{y^2+1}
\tag{7.6}
\end{equation}\]</span>
<p>Portanto, para um par fixo de <span class="math inline">\((m, \sigma)\)</span> nosso problema reduzido é:</p>
<span class="math display" id="eq:reduzido">\[\begin{equation}
P_{m, \sigma}:=\min\limits_{a, c, d \in D}f_y(a, c, d)
\tag{7.7}
\end{equation}\]</span>
<p>onde <span class="math inline">\(f_y(\cdot)\)</span> é a função objetivo da reparametrização, e é dada pela seguinte equação:</p>
<span class="math display" id="eq:fy">\[\begin{equation}
f_y(a, c, d)=\sum_{i=1}^{n}\left[w(y_i)-\tilde w_i\right]^2
\tag{7.8}
\end{equation}\]</span>
<p>onde <span class="math inline">\(\tilde w_i\)</span> é a variância total observada correspondente ao <em>moneyness</em> <span class="math inline">\(k_i\)</span>.</p>
<p>O domínio <span class="math inline">\(D\)</span> dos parâmetros <span class="math inline">\(\{a, c, d\}\)</span> é encontrado a partir do limite imposto por <a href="svi.html#eq:trava">(7.4)</a>.</p>
<span class="math display" id="eq:D">\[\begin{equation}
    D =  
    \begin{cases}
    0 \leq c \leq 4\sigma\\
    |d| \leq c \quad \text{e}\quad |d| \leq 4\sigma - c\\
    0 \leq a \leq \max\{\tilde w_i\}\\
    \end{cases}
    \tag{7.9}
\end{equation}\]</span>
<p>O problema reduzido dado pela equação <a href="svi.html#eq:reduzido">(7.7)</a>, é um típico problema de <strong>mínimos quadrados</strong> com restrições lineares. Este problema, por ser convexo, admite uma única solução interior (se existente) que será o mínimo global para este problema e é encontrada através do gradiente da função objetivo igualando-o a zero, <span class="math inline">\(\nabla f_y = 0\)</span>. Esta equação gera um sistema linear nos parâmetros <span class="math inline">\(a, c, d\)</span> que pode ser explicitamente resolvido. Caso a solução encontrada para este problema esteja contida no domínio <span class="math inline">\(D\)</span>, esta solução é interior e é o mínimo desejado, caso contrário, deve-se percorrer o perímetro do domínio e encontrar o menor valor da função objetivo que será uma solução de canto.</p>
<p>Seja <span class="math inline">\((a^*, c^*, d^*)\)</span> a solução de <a href="svi.html#eq:reduzido">(7.7)</a> e <span class="math inline">\((a^*, b^*, \rho^*)\)</span> os correspondentes parâmetros originais recuperados, então o problema completo de calibração é:</p>
<span class="math display" id="eq:completo">\[\begin{equation}
P:=\min\limits_{m, \sigma}\sum_{i=1}^n (w_*(k_i)-\tilde w_i)^2
\tag{7.10}
\end{equation}\]</span>
<p>onde <span class="math inline">\(w_*(k)=a^*+b^*\left(\rho^*(k-m)+\sqrt{(k-m)^2 + \sigma^2}\right)\)</span>.</p>
<p>O problema completo, <a href="svi.html#eq:completo">(7.10)</a> é um problema em apenas duas dimensões, <span class="math inline">\((m, \sigma)\)</span> e não-linear, que deve ser abordado através de algum tipo de otimizador global.</p>
<div id="pq" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Solução explícita do problema reduzido</h3>
<p>Nesta seção apresentaremos a solução, sem considerar as restrições impostas em <a href="svi.html#eq:D">(7.9)</a> para o problema reduzido em <a href="svi.html#eq:reduzido">(7.7)</a>, algo omitido em <span class="citation">De Marco and Martini (<a href="#ref-DeMarco2009">2009</a>)</span>. Esta seção é opcional para o leitor atento que já percebeu a semelhança entre o problema reduzido e um típico problema de regressão linear múltipla.</p>
<p>Para encontrar o conjunto de parâmetros <span class="math inline">\((a^*, c^*, d^*)\)</span> que representam os valores ótimos na equação <a href="svi.html#eq:reduzido">(7.7)</a>, devemos resolver o seguinte sistema de equações:</p>
<span class="math display" id="eq:gradiente">\[\begin{equation}
\nabla f_y = \left[
    \begin{array}{c}
        \partial f_y / \partial a\\ 
        \partial f_y / \partial d\\
        \partial f_y / \partial c
    \end{array} 
\right] = \boldsymbol{0}
\tag{7.11}
\end{equation}\]</span>
<p>Cada uma das derivadas parciais da equação acima quando igualadas a zero dão origem ao sistema linear apresentado abaixo:</p>
<span class="math display" id="eq:linear">\[\begin{equation}
\scriptsize
\begin{bmatrix}
&amp;n &amp;\sum y_i &amp;\sum\sqrt{y_i^2+1}\\
&amp;\sum y_i &amp;\sum y_i^2 &amp;\sum(y_i\sqrt{y_i^2+1})\\
&amp;\sum\sqrt{y_i^2+1} &amp;\sum(y_i\sqrt{y_i^2+1}) &amp;\sum(y_i^2+1)\\
\end{bmatrix}
\cdot
\begin{bmatrix}
a \\
d \\
c
\end{bmatrix}
=
\begin{bmatrix}
\sum\tilde w_i \\
\sum \tilde w_i y_i \\
\sum(\tilde w_i\sqrt{y_i^2+1})
\end{bmatrix}
\tag{7.12}
\end{equation}\]</span>
<p>Portanto, o problema reduzido pode ser resolvido através de um sistema linear de ordem 3 sob restrições também lineares.</p>
</div>
</div>
<div id="algoritmo" class="section level2">
<h2><span class="header-section-number">7.4</span> Algoritmo</h2>
<p>A otimização para encontrar os parâmetros ótimos de um SVI dadas observações de mercado e a técnica de calibração <strong>Quasi-explicit</strong> de <span class="citation">De Marco and Martini (<a href="#ref-DeMarco2009">2009</a>)</span> pode ser resumida nos seguintes passos:</p>
<ol style="list-style-type: decimal">
<li><p>Definir valores iniciais para os parâmetros <span class="math inline">\((m, \sigma)\)</span>,</p></li>
<li><p>Iniciar algum otimizador global com estes parâmetros e resolver o problema completo <a href="svi.html#eq:completo">(7.10)</a></p>
<p>2.1 Dentro da otimização global, resolver o problema reduzido <a href="svi.html#eq:reduzido">(7.7)</a> para os parâmetros <span class="math inline">\((m, \sigma)\)</span> dados,</p></li>
<li><p>Na convergência do problema completo do passo 2, otimizar uma última vez o problema reduzido,</p></li>
<li><p>Recuperar os parâmetros <span class="math inline">\((a, b, \rho, m, \sigma)\)</span></p></li>
</ol>
<p>A escolha dos otimizadores fica a cargo pessoal, sendo sugerido testar vários para o mesmo problema. Eventualmente, para um determinado <em>smile</em> um otimizador pode se mostrar melhor que outro que vinha sendo utilizado em outras ocasiões.</p>
<p>Nos testes realizados pelo <a href="http://clubedefinancas.com.br">Clube de Finanças</a>, entre os otimizadores globais para o problema completo utilizamos <a href="https://cran.r-project.org/package=GA"><strong>Algoritmos Genéticos</strong></a>, <a href="https://www.rdocumentation.org/packages/stats/versions/3.5.2/topics/constrOptim"><strong>Nelder-Mead restrito</strong></a> e um <a href="https://cran.r-project.org/package=Rsolnp"><strong>Método não-linear generalizado</strong></a>. Para o problema reduzido, apesar de ser linear, o método de Nelder-Mead restrito se mostrou tão eficiente quanto e de mais fácil implementação. Se o objetivo for fazer uma calibração direta, dos cinco parâmetros ao mesmo tempo, uma combinação de otimizador global em primeiro estágio e o método de Levenberg-Marquardt restrito para refinamento da solução é o ideal.</p>
</div>
<div id="resultados" class="section level2">
<h2><span class="header-section-number">7.5</span> Resultados</h2>
<p>A seguir apresentamos um <em>smile</em> de referência para a calibração, obtido de <a href="http://www.ivolatility.com/doc/usa/IV_Raw_Delta_surface.csv">ivolatility.com</a> e então partimos para diferentes técnicas de calibração de um SVI. Os códigos em <a href="https://cran.r-project.org/">R</a> também estão apresentados ao longo do texto para melhor compreensão e estudo do leitor.</p>
<p>Os dados utilizados neste exemplo estão apresentados na tabela <a href="svi.html#tab:dados">7.1</a> abaixo. Esta é uma típica apresentação de um <em>slice</em> de superfície, ou seja, dados para um <em>smile</em> apenas. As principais variáveis são: a data em que os dados foram coletados (date), o preço de fechamento do ativo (stock_price), o prazo para expiração em dias (period), e medidas de moneyness como delta, <em>strike</em> e o próprio <em>moneyness</em>, além é claro da volatilidade implícita (iv) retirada do mercado.</p>
<table class="table table-striped" style="font-size: 14px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:dados">Tabela 7.1: </span>Dados reais para exemplo de calibração de uma SVI.
</caption>
<thead>
<tr>
<th style="text-align:left;">
date
</th>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:left;">
exchange
</th>
<th style="text-align:right;">
stock_price_for_iv
</th>
<th style="text-align:right;">
period
</th>
<th style="text-align:right;">
delta
</th>
<th style="text-align:right;">
moneyness
</th>
<th style="text-align:right;">
strike
</th>
<th style="text-align:right;">
iv
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
148.41
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
147.49
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
146.80
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
146.21
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
145.69
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
145.19
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
144.69
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
144.18
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
143.66
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
143.12
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
142.53
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
-0.01
</td>
<td style="text-align:right;">
141.88
</td>
<td style="text-align:right;">
0.11
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
141.13
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
75
</td>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
140.26
</td>
<td style="text-align:right;">
0.13
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
139.16
</td>
<td style="text-align:right;">
0.13
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
137.66
</td>
<td style="text-align:right;">
0.14
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
IWM
</td>
<td style="text-align:left;">
NYSEArca
</td>
<td style="text-align:right;">
143.73
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:right;">
135.32
</td>
<td style="text-align:right;">
0.16
</td>
</tr>
</tbody>
</table>
<p>Esta tabela poderia conter (de fato contém no arquivo original) outros períodos de expiração, e neste caso uma das colunas de <em>moneyness</em> começa a se repetir, no caso seria o delta pois baixamos uma tabela de volatilidades implícitas por delta. Assim, em uma tabela simples em formato <a href="http://vita.had.co.nz/papers/tidy-data.html"><code>tidy</code></a> é possível armazenar informações de uma superfície inteira, a qual de outra forma necessitaria de um arranjo em 3 dimensões.</p>
<p>Ressaltamos aqui que a unidade de volatilidade implícita está em percentuais <strong>ao ano</strong>, equanto que nosso período é de dias corridos. É necessário harmonizar estas medidas de forma que, para volatiliades dadas em percentual ao ano, o período também seja dado em <strong>anos</strong>. Logo nosso <span class="math inline">\(\tau = 30/365\)</span>, ou seja, 0.08219.</p>
<p>Demonstraremos aqui os resultados para a calibração de uma <em>RAW SVI</em> pelos métodos “Direto”, “GA”, “Quasi-NM” e “Quasi-PQ”, abaixo explicados.</p>
<p>O método “Direto” é uma calibração direta através de um algoritmo de <strong>Levenberg-Marquardt</strong> da equação <a href="superficies.html#eq:rawsvi">(5.11)</a>, ou seja, não existe reparametrização <em>Quasi-explicit</em> e o problema resolvido é não-linear em 5 dimensões. São realizadas 10 calibrações com estimativas iniciais dos parâmetros aleatórias, mas dentro de seus respectivos domínios. A melhor solução, aquela com o menor valor para a função objetivo, é selecionada. Todos os outros métodos utilizam a reparametrização, ocorrendo variações apenas nos algoritmos de otimização utilizados nos problemas reduzido e completo.</p>
<p>A calibração “GA” faz uso do otimizador global de <strong>algoritmos genéticos</strong> para o problema completo, ou seja, para estimar o par <span class="math inline">\((m, \sigma)\)</span> que corresponde ao mínimo global. Após, o problema reduzido é resolvido através do algoritmo de <strong>Nelder-Mead</strong>. Este método é robusto, pois o algoritmo genético tem grande probabilidade de encontrar a região onde se encontra o mínimo global e não ficar preso localmente. Entretanto a robustez ocorre as expensas do tempo de computação.</p>
<p>Os métodos ditos “Quasi” diferem entre si na resolução do problema reduzido. Enquanto “PQ” remete a <strong>programação quadrática</strong> e faz uso da resolução do sistema linear apresentado na equação <a href="svi.html#eq:linear">(7.12)</a> com as restrições impostas por <a href="svi.html#eq:D">(7.9)</a>, o método “Quasi-NM” utiliza o método de <strong>Nelder-Mead</strong> com restrições para a resolução deste mesmo problema reduzido. Em ambos os métodos, o problema completo é resolvido com um algoritmo de Nelder-Mead com 50 reinicializações das estimativas iniciais dos parâmetros <span class="math inline">\((m, \sigma)\)</span>, o que causa algum impacto no tempo de computação destes métodos.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">smile &lt;-<span class="st"> </span>dados <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tau =</span> period <span class="op">/</span><span class="st"> </span><span class="dv">365</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(moneyness, iv, tau)

par_names &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;$</span><span class="ch">\\</span><span class="st">rho$&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;$</span><span class="ch">\\</span><span class="st">sigma$&quot;</span>),
                    <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;$</span><span class="ch">\\</span><span class="st">rho$&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;$</span><span class="ch">\\</span><span class="st">sigma$&quot;</span>))
k &lt;-<span class="st"> </span>smile<span class="op">$</span>moneyness
w &lt;-<span class="st"> </span>smile<span class="op">$</span>iv<span class="op">^</span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>smile<span class="op">$</span>tau

init_direct &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
par_direct &lt;-<span class="st"> </span><span class="kw">svi_fit_direct</span>(k, w)</code></pre></div>
<pre><code>## Warning in minpack.lm::nls.lm(init_pars, lower = c(0, 0, -1, -Inf, 0), upper = c(max(w), : lmdif: info = -1. Number of iterations has reached `maxiter&#39; == 100.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">end_direct &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
time_direct &lt;-<span class="st"> </span>end_direct <span class="op">-</span><span class="st"> </span>init_direct 

init_ga &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
par_ga &lt;-<span class="st"> </span><span class="kw">svi_fit_ga</span>(k, w)
end_ga &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
time_ga &lt;-<span class="st"> </span>end_ga <span class="op">-</span><span class="st"> </span>init_ga 

init_quasipq &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
par_quasipq &lt;-<span class="st"> </span><span class="kw">svi_fit_quasi</span>(k, w, <span class="dt">inner =</span> <span class="st">&quot;quadprog&quot;</span>)
end_quasipq &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
time_quasipq &lt;-<span class="st"> </span>end_quasipq <span class="op">-</span><span class="st"> </span>init_quasipq 

init_quasinm &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
par_quasinm &lt;-<span class="st"> </span><span class="kw">svi_fit_quasi</span>(k, w)
end_quasinm &lt;-<span class="st"> </span><span class="kw">proc.time</span>()
time_quasinm &lt;-<span class="st"> </span>end_quasinm <span class="op">-</span><span class="st"> </span>init_quasinm 

iv_direct &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">svi_fun</span>(par_direct<span class="op">$</span>par[[<span class="dv">1</span>]], k) <span class="op">/</span><span class="st"> </span>smile<span class="op">$</span>tau)
iv_ga &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">svi_fun</span>(par_ga<span class="op">$</span>par[[<span class="dv">1</span>]], k) <span class="op">/</span><span class="st"> </span>smile<span class="op">$</span>tau)
iv_quasipq &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">svi_fun</span>(par_quasipq<span class="op">$</span>par[[<span class="dv">1</span>]], k) <span class="op">/</span><span class="st"> </span>smile<span class="op">$</span>tau)
iv_quasinm &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">svi_fun</span>(par_quasinm<span class="op">$</span>par[[<span class="dv">1</span>]], k) <span class="op">/</span><span class="st"> </span>smile<span class="op">$</span>tau)

plot_tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">k =</span> k,
              <span class="dt">Direct =</span> iv_direct,
              <span class="dt">GA =</span> iv_ga,
              <span class="dt">QuasiPQ =</span> iv_quasipq,
              <span class="dt">QuasiNM =</span> iv_quasinm,
              <span class="dt">observed =</span> smile<span class="op">$</span>iv) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span> method, <span class="dt">value =</span> iv, <span class="op">-</span><span class="kw">c</span>(k, observed))

par_tbl &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(par_direct, par_ga, par_quasipq, par_quasinm) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(method, par) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">method =</span> <span class="kw">c</span>(<span class="st">&quot;Direct&quot;</span>, <span class="st">&quot;GA&quot;</span>, <span class="st">&quot;QuasiPQ&quot;</span>, <span class="st">&quot;QuasiNM&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">unnest</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">names =</span> <span class="kw">rep</span>(par_names, <span class="dv">4</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(method, par) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(names, Direct, GA, QuasiPQ, QuasiNM) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">names =</span> <span class="kw">as.character</span>(names)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(Direct<span class="op">:</span>QuasiNM), arred)

rmse_tbl &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(par_direct, par_ga, par_quasipq, par_quasinm) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(method, par) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">method =</span> <span class="kw">c</span>(<span class="st">&quot;Direct&quot;</span>, <span class="st">&quot;GA&quot;</span>, <span class="st">&quot;QuasiPQ&quot;</span>, <span class="st">&quot;QuasiNM&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">unnest</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(method) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">RMSE =</span> <span class="kw">rmse</span>(par, k, w)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(method, RMSE) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">names =</span> <span class="st">&quot;RMSE&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(names, Direct, GA, QuasiPQ, QuasiNM) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(Direct<span class="op">:</span>QuasiNM), format, <span class="dt">digits =</span> <span class="dv">3</span>, <span class="dt">scientific =</span> <span class="ot">TRUE</span>)

time_tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">method =</span> <span class="kw">c</span>(<span class="st">&quot;Direct&quot;</span>, <span class="st">&quot;GA&quot;</span>, <span class="st">&quot;QuasiPQ&quot;</span>, <span class="st">&quot;QuasiNM&quot;</span>),
                   <span class="dt">time =</span> <span class="kw">rbind</span>(time_direct, time_ga, 
                                time_quasipq, time_quasinm)[, <span class="dv">3</span>]) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(method, time) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">names =</span> <span class="st">&quot;Tempo&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(names, Direct, GA, QuasiPQ, QuasiNM) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(Direct<span class="op">:</span>QuasiNM), arred)

frame_tbl &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(par_tbl, rmse_tbl, time_tbl)</code></pre></div>
<p>Abaixo é apresetanda uma tabela com os valores estimados para os parâmetros da SVI, o RMSE (root mean square error) e o tempo total em segundos para a calibração. Aqui o RMSE é definido como <span class="math inline">\(\sqrt{1/n\sum(w(k_i)-\tilde w_i)^2}\)</span> e nos fornece um valor típico de erro <strong>na variância</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">kable</span>(frame_tbl,
      <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;Estimativa&quot;</span>, <span class="st">&quot;Direto&quot;</span>, <span class="st">&quot;GA&quot;</span>, 
                    <span class="st">&quot;QuasiPQ&quot;</span>, <span class="st">&quot;QuasiNM&quot;</span>),
      <span class="dt">caption =</span> <span class="st">&quot;Parâmetros estimados da calibração, RMSE e tempo de computação em segundos.&quot;</span>,
      <span class="dt">booktabs =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="st">&quot;striped&quot;</span>,
                <span class="dt">font_size =</span> <span class="dv">18</span>,
                <span class="dt">full_width =</span> <span class="ot">FALSE</span>)</code></pre></div>
<table class="table table-striped" style="font-size: 18px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:tabela">Tabela 7.2: </span>Parâmetros estimados da calibração, RMSE e tempo de computação em segundos.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Estimativa
</th>
<th style="text-align:left;">
Direto
</th>
<th style="text-align:left;">
GA
</th>
<th style="text-align:left;">
QuasiPQ
</th>
<th style="text-align:left;">
QuasiNM
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
0.00000
</td>
<td style="text-align:left;">
0.00001
</td>
<td style="text-align:left;">
0.00000
</td>
<td style="text-align:left;">
0.00001
</td>
</tr>
<tr>
<td style="text-align:left;">
b
</td>
<td style="text-align:left;">
0.01953
</td>
<td style="text-align:left;">
0.01950
</td>
<td style="text-align:left;">
0.01695
</td>
<td style="text-align:left;">
0.01944
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\rho\)</span>
</td>
<td style="text-align:left;">
-0.79855
</td>
<td style="text-align:left;">
-0.80034
</td>
<td style="text-align:left;">
-1.00000
</td>
<td style="text-align:left;">
-0.79429
</td>
</tr>
<tr>
<td style="text-align:left;">
m
</td>
<td style="text-align:left;">
-0.00751
</td>
<td style="text-align:left;">
-0.00756
</td>
<td style="text-align:left;">
-0.01118
</td>
<td style="text-align:left;">
-0.00701
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\sigma\)</span>
</td>
<td style="text-align:left;">
0.05041
</td>
<td style="text-align:left;">
0.05016
</td>
<td style="text-align:left;">
0.06905
</td>
<td style="text-align:left;">
0.04984
</td>
</tr>
<tr>
<td style="text-align:left;">
RMSE
</td>
<td style="text-align:left;">
8.67e-06
</td>
<td style="text-align:left;">
8.69e-06
</td>
<td style="text-align:left;">
9.55e-05
</td>
<td style="text-align:left;">
8.69e-06
</td>
</tr>
<tr>
<td style="text-align:left;">
Tempo
</td>
<td style="text-align:left;">
0.07500
</td>
<td style="text-align:left;">
30.96400
</td>
<td style="text-align:left;">
0.26000
</td>
<td style="text-align:left;">
14.51000
</td>
</tr>
</tbody>
</table>
<p>O método Direto, com algoritmo de Levenberg-Marquardt se mostrou muito mais rápido que os demais, principalmente com relação ao algoritmo genético, e com um bom ajuste dado o baixo valor de RMSE. O algoritmo genético é consideravelmente mais lento, entretanto durante as várias calibrações realizadas em testes (e que não estão apresentadas na tabela <a href="svi.html#tab:tabela">7.2</a>), este algoritmo sempre se mostrou robusto, com baixo RMSE, diferentemente dos outros métodos que por vezes, denpendendo das estimativas iniciais, podem convergir para um mínimo local.</p>
<p>O gráfico com os ajustes realizados pode ser observado abaixo.</p>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(plot_tbl, <span class="kw">aes</span>(<span class="dt">x =</span> k)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">y =</span> observed)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">y =</span> iv, <span class="dt">color =</span> method)) <span class="op">+</span>
<span class="st">  </span><span class="kw">guides</span>(<span class="dt">color =</span> <span class="kw">guide_legend</span>(<span class="dt">title =</span> <span class="st">&quot;&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;&quot;</span>,
       <span class="dt">x =</span> <span class="st">&quot;Forward log-moneyness&quot;</span>,
       <span class="dt">y =</span> <span class="st">&quot;Volatility&quot;</span>,
       <span class="dt">caption =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>percent) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_viridis_d</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_economist_white</span>()</code></pre></div>
<div class="figure"><span id="fig:plot"></span>
<img src="07-calibrando-uma-svi_files/figure-html/plot-1.png" alt="Comparação entre diferentes métodos de calibração de uma SVI." width="672" />
<p class="caption">
Figura 7.1: Comparação entre diferentes métodos de calibração de uma SVI.
</p>
</div>
<p>De fato o método direto e o método <em>Quasi-explicit</em> com otimizador global do tipo algoritmo genético se mostram mais adequados para a calibração de um SVI. Enquanto o método direto é muito mais eficiente em termos computacionais, o método <em>Quasi-explicit</em> com GA é mais robusto. Desta forma, deve-se salientar que é necessário que o usuário, ao fazer uma calibração de <em>smile</em> de volatilidade, deve dispor de diferentes métodos de fazê-lo, e a inspeção visual do resultado é <strong>obrigatória</strong> para determinar qual método foi mais eficiente em ajustar a curva aos dados.</p>
</div>
<div id="conclusao-3" class="section level2">
<h2><span class="header-section-number">7.6</span> Conclusão</h2>
<p>Apesar de neste exemplo ter se mostrado um método efetivo, com bom ajuste e baixo tempo de calibração, o método direto é altamente dependente dos valores iniciais dos parâmetros. Para tornar este método mais robusto, um número maior de reinicializações deve ser feita o que penaliza o tempo de calibração. O método <em>Quasi-explicit</em> com algoritmo genético para encontrar a região de <span class="math inline">\((m, \sigma)\)</span> onde se encontra o mínimo global se mostrou bastante robusta, entretanto, de convergência lenta. Para ajustar apenas um <em>smile</em> alguns segundos a mais não representam problema. Porém, se imaginarmos que em uma grande instituição financeira são necessárias calibrações de, talvez, milhares de <em>smiles</em> representando inúmeras superfícies de diversos instrumentos, este método pode se mostrar computacionalmente caro.</p>
<p>Já os métodos <em>Quasi-explicit</em> que utilizam um algoritmo de Nelder-Mead para a resolução do problema completo se mostraram muito sensíveis às estimativas iniciais dos parâmetros. Mesmo utilizando 50 reinicialzações do método, diversas vezes o ajuste realizado foi insatisfatório. A resolução através de programação quadrática é rápida, se comparada com NM, entretanto, quando as restrições impostas pela equação <a href="svi.html#eq:D">(7.9)</a> se tornam ativas, este método parece sofrer com algum viés em sua solução.</p>

</div>
</div>
<h3>Bibliografia</h3>
<div id="refs" class="references">
<div id="ref-Gatheral2004">
<p>Gatheral, Jim. 2004. “A Parsimonious Arbitrage-Free Implied Volatility Parameterization with Application to the Valuation of Volatility Derivatives.” <em>Presentation at Global Derivatives &amp; Risk Management, Madrid</em>.</p>
</div>
<div id="ref-DeMarco2009">
<p>De Marco, S, and C Martini. 2009. “Quasi-Explicit Calibration of Gatheral’s Svi Model’.” <em>Zeliade White Paper</em>, 1–15.</p>
</div>
<div id="ref-Lee2004">
<p>Lee, Roger W. 2004. “The Moment Formula for Implied Volatility at Extreme Strikes.” <em>Mathematical Finance: An International Journal of Mathematics, Statistics and Financial Economics</em> 14 (3). Wiley Online Library: 469–80.</p>
</div>
<div id="ref-Gatheral2014">
<p>Gatheral, Jim, and Antoine Jacquier. 2014. “Arbitrage-Free Svi Volatility Surfaces.” <em>Quantitative Finance</em> 14 (1). Taylor &amp; Francis: 59–71.</p>
</div>
<div id="ref-Rogers2010">
<p>Rogers, Leonard CG, and MR Tehranchi. 2010. “Can the Implied Volatility Surface Move by Parallel Shifts?” <em>Finance and Stochastics</em> 14 (2). Springer: 235–48.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="14">
<li id="fn14"><p>A resolução desta derivada é uma simples regra da divisão, entretanto a simplificação do resultado pede alguma manipulação algébrica. É possível utilizar sistemas de computação simbólica, o qual recomendamos o <a href="https://live.sympy.org/">SymPy</a><a href="svi.html#fnref14">↩</a></p></li>
<li id="fn15"><p>Condições para ausência de arbitragem do tipo borboleta em um SVI estão detalhadas na seção 2.2 do artigo de <span class="citation">Gatheral and Jacquier (<a href="#ref-Gatheral2014">2014</a>)</span>.<a href="svi.html#fnref15">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="calibracao.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ssvi.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rfbressan/vol_surface_gitbook/edit/master/07-calibrando-uma-svi.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["vol_surface_book.pdf", "vol_surface_book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
